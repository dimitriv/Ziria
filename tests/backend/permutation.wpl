let testp = {  0,  3,  6,  9, 12, 15, 18, 21
            , 24, 27, 30, 33, 36, 39, 42, 45
            ,  1,  4,  7, 10, 13, 16, 19, 22
            , 25, 28, 31, 34, 37, 40, 43, 46
            ,  2,  5,  8, 11, 14, 17, 20, 23
            , 26, 29, 32, 35, 38, 41, 44, 47
            }
in

fun perm(p : arr int, iarr : arr[length(p)] bit) {
  var oarr : arr[length(p)] bit;
  for i in [0,length(p)] {
    oarr[p[i]] := iarr[i]
  }
  return oarr
} in



read >>> 
repeat { x <- takes 48
       ; emits (perm(testp,x))
       } >>> write 
